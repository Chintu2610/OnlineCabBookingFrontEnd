<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <!-- Add your CSS includes here -->
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="../css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <!-- Fontawesome CSS -->
    <link rel="stylesheet" href="../css/font-awesome.min.css">
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="../css/M.css">
    <!-- Add any additional CSS files if needed -->
    <style>
        /* Flexbox styles for layout */
        .main-wrapper {
            
            flex-direction: row; /* Display items in a row */
            justify-content: flex-start; /* Align items to the start (left) */
            align-items: stretch; /* Stretch items to match container height */
        }
        .sidebar {
            width: 200px; /* Adjust sidebar width as needed */
        }
        .page-wrapper {
         
            padding: 20px; /* Add padding to content area */
        }
        /* Adjustments for smaller screens */
        @media (max-width: 768px) {
            .main-wrapper {
                flex-direction: column; /* Display items in a column */
                align-items: center; /* Center items vertically */
            }
            .sidebar {
                width: 100%; /* Full width for smaller screens */
            }
        }
    </style>
</head>
<body style="background-color: white;">
    <div class="main-wrapper">
        <!-- No iframe for header, content loaded via fetch -->
        <div id="header"></div>
        
        <div class="sidebar" style="width: 200px;">
            <iframe src="sidebar.html" width="100%" height="650px" frameborder="0"></iframe>
        </div>

      
        <div class="page-wrapper" style="margin-top: 0%;">
            <!-- Page Content -->
            <div class="content container-fluid">
                <!-- Page Header -->
                <div class="page-header">
                    <!-- Header content here -->
                    <div class="col">
                        
                        <br><br><h3 class="page-title">Register</h3>
                        <ul class="breadcrumb">
                            <li class="breadcrumb-item"><a
                                href="admin_dashboard.html">Dashboard</a></li>
                            <li class="breadcrumb-item active">Register</li>
                        </ul>
                    </div>
                </div>

                <!-- Centered User ID container -->
                <div class="user-id-container d-flex justify-content-center align-items-center">
                    <div class="container-fluid" style="background-color: #F5F5F5; padding: 20px; border-radius: 10px; margin-right: 60px;">
                        <form id="registerForm">
                            <!-- {
                                "userName": "string",
                                "password": "string",
                                "address": "string",
                                "mobileNumber": "string",
                                "email": "string",
                                "userRole": "string",
                                "driverId": 0,
                                "licenceNo": "string",
                                "rating": 0,
                                "currLocation": "string",
                                "currDriverStatus": "string"
                              } -->
                        <div class="form-group row">
                            <div class="col-md-6">
                                <label class="col-form-label">User Name <span class="text-danger">*</span></label>
                                <input name="userName" required class="form-control" type="text">
                            </div>
                            <div class="col-md-6">
                                <label class="col-form-label">Address <span class="text-danger">*</span></label>
                                <input name="address" required class="form-control" type="text">
                            </div>
                        </div>
                        <!-- Add more pairs of fields in a similar manner -->
                        
                        <div class="form-group row">
                            <div class="col-md-6">
                                <label class="col-form-label">Mobile Number <span class="text-danger">*</span></label>
                                <input name="mobileNumber" required class="form-control" type="text">
                            </div>
                            <div class="col-md-6">
                                <label class="col-form-label">Email <span class="text-danger">*</span></label>
                                <input name="email" required class="form-control" type="email">
                            </div>
                        </div>
                        <div class="form-group row">
                            <div class="col-md-6">
                                <label class="col-form-label">User Role <span class="text-danger">*</span></label>
                                <input name="userRole" required class="form-control" type="text" value="Driver" disabled>
                            </div>
                            <div class="col-md-6">
                                <label class="col-form-label">Driver ID <span class="text-danger">*</span></label>
                                <input name="driverId" required class="form-control" type="text">
                            </div>
                        </div>
                        <div class="form-group row">
                            <div class="col-md-6">
                                <label class="col-form-label">Licence Number <span class="text-danger">*</span></label>
                                <input name="licenceNo" required class="form-control" type="text">
                            </div>
                            <div class="col-md-6">
                                <label class="col-form-label">Rating <span class="text-danger">*</span></label>
                                <input name="rating" required class="form-control" type="text">
                            </div>
                        </div>
                        <div class="form-group row">
                            <div class="col-md-6">
                                <label class="col-form-label">Current Location <span class="text-danger">*</span></label>
                                <input name="currLocation" required class="form-control" type="text">
                            </div>
                            <div class="col-md-6">
                                <label class="col-form-label">Current Driver Status <span class="text-danger">*</span></label>
                                <input name="currDriverStatus" required class="form-control" type="text">
                            </div>

                        </div>
                        <div class="form-group row">
                            
                            <div class="col-md-6">
                                <label class="col-form-label">Password <span class="text-danger">*</span></label>
                                <input name="password" required class="form-control" type="password">
                            </div>
                        </div>
                        </form>
            </div> 
            </div>  
        </div>
        
         <div class="submit-section">
            <button type="button" onclick="submitForm()" class="btn btn-primary submit-btn">Submit</button>

          </div>
          </div>

    <!-- Add your JavaScript includes here -->
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script src="../js/bootstrap.bundle.min.js"></script>
    <script>
        // Load header content
        fetch('header.html')//there is not script for it  data-target se vo connect hota
            .then(response => response.text())
            .then(data => document.getElementById('header').innerHTML = data)
            .catch(error => console.error('Error fetching header:', error));

        // Load sidebar content
        fetch('sidebar.html')
            .then(response => response.text())
            .then(data => document.getElementById('sidebar').innerHTML = data)
            .catch(error => console.error('Error fetching sidebar:', error));

    </script>
    <script>
        // Function to open the Booking Request modal
        function openBookingRequestModal() {
            $('#Tripcntrbookreq').modal('show'); // Show the modal using Bootstrap's modal method
        }
    
        // Add event listener to the button to open the modal when clicked
        document.getElementById('bookingRequestBtn').addEventListener('click', openBookingRequestModal);
    </script>
    <script>
        // Function to handle form submission
        function submitForm(event) {
            
            // Get form data
            const formData = new FormData(document.getElementById('registerForm'));
    
            // Convert formData to JSON object
            const jsonObject = {};
            formData.forEach((value, key) => {
                jsonObject[key] = value;
            });
    
            // Send POST request to the backend
            fetch('http://localhost:1995/driver/register', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(jsonObject)
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error('Failed to register driver');
                }
                return response.json();
            })
            .then(data => {
                // Handle success response
                console.log('Driver registered successfully:', data);
                // Optionally, redirect to another page or show a success message
                alert('Driver registered successfully');
            })
            .catch(error => {
                console.error('Error registering driver:', error);
                // Handle error
                alert('Failed to register driver. Please try again.');
            });
        }
    
        // Add event listener to the form for form submission
        document.getElementById('registerForm').addEventListener('submit', submitForm);
    </script>
</body>
</html>